# EXP-01: Topological Signatures of Knowledge Persistence
# -------------------------------------------------------
# Phase 1: Train on Task A (Split-CIFAR-100, first 50 classes)
# Phase 2: Compute persistent homology of loss landscape
# Phase 3: Sequential training on Task B, measure forgetting
# Phase 4: Correlate topology with retention

experiment: exp01_topological_persistence

# --- Data ---
dataset: cifar100
task_a_classes: [0, 50]    # first 50 classes
task_b_classes: [50, 100]  # remaining 50 classes
data_dir: ./data

# --- Model ---
architecture: resnet18
num_classes_a: 50
num_classes_b: 50

# --- Training (Phase 1 & 3) ---
training:
  epochs: 100
  batch_size: 128
  optimizer: sgd
  lr: 0.1
  momentum: 0.9
  weight_decay: 5.0e-4
  lr_schedule: cosine
  warmup_epochs: 5

# --- Landscape Sampling (Phase 2) ---
landscape:
  num_directions: 2          # 2D slice through weight space
  steps_per_direction: 50    # grid resolution (50x50 = 2500 points)
  range: [-1.0, 1.0]        # perturbation range (filter-normalized)
  filter_normalize: true     # Li et al. 2018

# --- Persistent Homology (Phase 2) ---
topology:
  max_dimension: 1           # compute H0, H1 (H2 too memory-intensive at this scale)
  max_edge_length: 2.0       # truncate Rips complex
  num_landscape_samples: 2500   # must equal steps^2

# --- Forgetting Measurement (Phase 3) ---
forgetting:
  eval_steps: [10, 25, 50, 100, 250, 500, 1000, 5000]
  save_checkpoints: true

# --- Output ---
output_dir: ./results/exp01
seed: 42
device: cuda
